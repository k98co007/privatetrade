# TICKET-029: 백테스트 다운로드 기능 재테스트 - 수동 테스트 체크리스트

**예상 소요 시간:** 20-25 분  
**선수 조건:** Node.js 서버 실행 중, 브라우저 열려있음  

---

## STEP 1: 환경 설정 (3분)

### 1.1 백엔드 서버 시작
- [ ] 명령어 실행: `cd backend && node server.js`
- [ ] 예상: 포트 8000에서 서버 실행
- [ ] 검증: ✓ 서버가 실행 중

### 1.2 프론트엔드 열기
- [ ] URL: `http://localhost:8000/pages/specific-stock-selection.html`
- [ ] 예상: 페이지가 정상 표시
- [ ] 검증: ✓ 페이지 로드 완료

### 1.3 개발자 도구 열기
- [ ] F12 키 누르기
- [ ] Console 탭 이동 (에러 확인용)
- [ ] Network 탭 이동 (API 호출 확인용)
- [ ] 검증: 모든 탭 준비 완료

---

## STEP 2: 정상 흐름 테스트 (10분)

### 2A: 백테스트 완전 프로세스

#### 2A.1 페이지 로드 검증
- [ ] 에러 없이 페이지 로드
- [ ] "특정 종목 선택" 제목 표시
- [ ] 모드 선택기 표시
- [ ] 종목 목록 표시
- **결과:** PASS / FAIL

#### 2A.2 모드 선택
- [ ] "특정 종목" 모드 선택
- [ ] 종목 선택 폼 섹션 확장
- [ ] 종목 추가 입력 필드 사용 가능
- **결과:** PASS / FAIL

#### 2A.3 종목 추가
- [ ] "삼성전자" (005930) 검색
- [ ] 추가 버튼 클릭
- [ ] 종목이 선택 목록에 나타남
- [ ] 카운트가 "1"로 증가
- **결과:** PASS / FAIL

#### 2A.4 백테스팅 시작
- [ ] "백테스팅 시작" 버튼 클릭 가능
- [ ] 버튼이 disabled 상태로 변경
- [ ] 진행 섹션 나타남
- [ ] 진행률 바가 0%부터 시작
- [ ] 상태 메시지: "백테스팅이 시작되었습니다"
- **결과:** PASS / FAIL

#### 2A.5 진행률 모니터링
- [ ] 진행률 바가 증가 (0% → 10% → ... → 100%)
- [ ] 각 증가가 약 1-2초 소요
- [ ] 상태가 실시간 업데이트
- [ ] 예상 완료 시간: ~10초
- **결과:** PASS / FAIL

#### 2A.6 백테스트 완료
- [ ] 진행률이 100%에 도달할 때까지 대기
- [ ] 상태 메시지: "완료!"
- [ ] 진행 섹션이 종료/전환
- [ ] 결과 섹션 나타남
- **결과:** PASS / FAIL

#### 2A.7 결과 표시
- [ ] 백테스트 ID 표시 (형식: bt-YYYY-MM-DD-###)
- [ ] 완료 시간 표시
- [ ] 모든 메트릭 표시:
  - [ ] 총 수익률 (Total Return)
  - [ ] 샤프 비율 (Sharpe Ratio)
  - [ ] 최대 낙폭 (Max Drawdown)
  - [ ] 총 거래수 (Total Trades)
  - [ ] 승률 (Win Rate)
- **결과:** PASS / FAIL

#### 2A.8 **CRITICAL: 다운로드 기능 테스트**
- [ ] "결과 다운로드" 버튼 클릭

##### 검증 포인트 A: 404 에러 없음
- [ ] 콘솔 확인: "GET /api/results/... 404" 같은 에러 없음
- [ ] 콘솔 확인: "404 Not Found" 메시지 없음
- [ ] 콘솔 확인: axios/fetch 에러 없음
- **결과:** ✅ 404 에러 감지 안 됨

##### 검증 포인트 B: 파일 다운로드
- [ ] 브라우저: 파일 다운로드 프롬프트 나타남
- [ ] 또는: Downloads 폴더에 파일 생성됨
- [ ] 파일명 검증: `backtest-result-{backtestId}.json`
- **결과:** PASS / FAIL

#### 2A.9 Network 탭 검증
- [ ] DevTools Network 탭 이동
- [ ] "결과 다운로드" 다시 클릭
- [ ] API 요청 찾기
- [ ] 검증 항목:
  - [ ] 요청 URL: `/api/backtest/result/{id}`
  - [ ] 요청 메서드: `GET`
  - [ ] 응답 상태: `200 OK`
  - [ ] 응답 타입: `application/json`
- [ ] Response 탭 클릭
- [ ] JSON 포함 검증:
  - [ ] "backtest_id"
  - [ ] "status": "completed"
  - [ ] "performance": { ... }
  - [ ] "completed_at"
- **결과:** PASS / FAIL

---

## STEP 3: 엣지 케이스 테스트 (5분)

### 3B: 다중 다운로드
- [ ] "결과 다운로드" 버튼을 빠르게 3번 클릭
- [ ] 각 다운로드 성공 확인
- [ ] Downloads에 3개 파일 생성 확인
- [ ] 콘솔 에러 없음
- **결과:** PASS / FAIL

### 3C: 다운로드 취소 및 재시도
- [ ] "결과 다운로드" 클릭
- [ ] 완료 전에 다시 클릭
- [ ] 두 요청 모두 처리됨
- [ ] 에러 없음
- **결과:** PASS / FAIL

### 3D: 네트워크 스로틀링
- [ ] DevTools → Network → 스로틀링 드롭다운
- [ ] "Slow 3G" 선택
- [ ] "결과 다운로드" 클릭
- [ ] 느리지만 완료됨
- [ ] 타임아웃 에러 없음
- [ ] 파일 다운로드 성공
- **결과:** PASS / FAIL

---

## STEP 4: 다운로드 파일 검증 (5분)

### 4.1 파일 시스템 확인
- [ ] 파일 탐색기 → Downloads 폴더
- [ ] 파일명: `backtest-result-[ID].json`
- [ ] 파일 크기: 0 KB보다 큼
- **결과:** PASS / FAIL

### 4.2 JSON 형식 검증
- [ ] 파일을 메모장으로 열기
- [ ] JSON 형식 확인 (HTML이 아님)
- [ ] 읽기 가능한 형식 확인
- [ ] "404" 또는 "Not Found" 텍스트 없음
- [ ] HTML 태그 없음
- **결과:** PASS / FAIL

### 4.3 JSON 내용 검증
파일에 다음 필드가 모두 포함되어야 함:
- [ ] "backtest_id": "{값}"
- [ ] "completed_at": "{ISO 타임스탐프}"
- [ ] "performance": {
- [ ] "total_return": "{값}"
- [ ] "sharpe_ratio": "{값}"
- [ ] "max_drawdown": "{값}"
- [ ] "total_trades": "{값}"
- [ ] "win_rate": "{값}"
- [ ] }
- **결과:** PASS / FAIL

### 4.4 JSON 유효성 검사
- [ ] JSON 유효성 검사기 사용 (jsonlint.com)
- [ ] 파일 내용 복사 및 붙여넣기
- [ ] 검증 에러 없음 확인
- **결과:** PASS / FAIL

---

## STEP 5: 회귀 테스트 (5분)

### 5.1 페이지 기능 확인
- [ ] "초기화" 버튼 클릭
- [ ] 모든 UI가 초기 상태로 복원
- [ ] 진행 섹션 숨김
- [ ] 결과 섹션 숨김
- [ ] 모드 선택기 초기화
- **결과:** PASS / FAIL

### 5.2 모드 전환 (모든 모드)
- [ ] "전체 종목" 모드 선택
  - [ ] 종목 선택 섹션 숨김
  - [ ] 작동 확인
- [ ] "필터 기반" 모드 선택
  - [ ] 종목 선택 섹션 숨김
  - [ ] 작동 확인
- [ ] "특정 종목" 모드 선택
  - [ ] 종목 선택 섹션 표시
  - [ ] 작동 확인
- **결과:** PASS / FAIL

### 5.3 종목 관리
- [ ] 2개 종목 추가
  - [ ] 목록에 둘 다 나타남
  - [ ] 카운트 = 2
- [ ] 1개 종목 제거
  - [ ] 목록에서 제거됨
  - [ ] 카운트 = 1
- [ ] 모두 지우기
  - [ ] 모두 제거됨
  - [ ] 카운트 = 0
- **결과:** PASS / FAIL

### 5.4 상태 메시지
- [ ] 0개 종목으로 백테스팅 시작 시도
  - [ ] 에러 메시지 표시
  - [ ] 내용: "최소 1개 이상의 종목을 선택..."
- [ ] 종목 추가 후 성공 메시지 확인
- **결과:** PASS / FAIL

### 5.5 콘솔 에러 확인
- [ ] 전 테스트 흐름 완료
- [ ] DevTools Console 탭 검토
- [ ] 빨간색 에러 없음
- [ ] 파란색 로그/메시지는 정상
- **결과:** PASS / FAIL

---

## STEP 6: API 엔드포인트 검증 (개발자 전용, 2분)

### 6.1 직접 API 테스트
```bash
curl http://localhost:8000/api/backtest/result/bt-2026-02-08-999
```
- [ ] 예상: 200 OK
- [ ] Content-Type: application/json
- [ ] 모든 필드 포함 확인
- **결과:** PASS / FAIL

### 6.2 기존 엔드포인트 검증
```bash
curl http://localhost:8000/api/results/bt-2026-02-08-999/download
```
- [ ] 예상: 404 Not Found
- [ ] 기존 엔드포인트가 작동 안 함 (404 반환해야 함)
- **결과:** PASS / FAIL

---

## 테스트 결과 요약

| 테스트 카테고리 | PASS | FAIL | 비고 |
|----------------|------|------|------|
| 1. 환경 설정 | [ ] | [ ] | |
| 2. 정상 흐름 | [ ] | [ ] | **CRITICAL: 404 체크 포함** |
| 3. 엣지 케이스 | [ ] | [ ] | |
| 4. 파일 검증 | [ ] | [ ] | |
| 5. 회귀 테스트 | [ ] | [ ] | |
| 6. API 검증 | [ ] | [ ] | 개발자 테스트 |

---

## CRITICAL 검증 포인트

**다음 항목들은 반드시 PASS 되어야 함:**

- [ ] ✅ 다운로드 버튼 클릭 시 404 에러 없음
- [ ] ✅ 파일이 성공적으로 다운로드됨 (JSON 형식)
- [ ] ✅ 올바른 엔드포인트 사용: `/api/backtest/result/{id}` (NOT `/api/results/{id}/download`)
- [ ] ✅ 다운로드된 파일이 유효한 JSON
- [ ] ✅ 파일에 모든 필수 필드 포함
- [ ] ✅ 기존 기능 작동 영향 없음

---

## 발견된 이슈 (해당 사항 있을 경우)

### Issue #1
- **설명:** 
- **재현 방법:** 
- **예상:** 
- **실제:** 
- **심각도:** [ ] 치명적 [ ] 중요 [ ] 경미 [ ] 정보

### Issue #2
- **설명:** 
- **재현 방법:** 
- **예상:** 
- **실제:** 
- **심각도:** [ ] 치명적 [ ] 중요 [ ] 경미 [ ] 정보

---

## 최종 판정

**전체 테스트 결과:**
- [ ] ✅ PASSED - TICKET-030 배포 준비 완료
- [ ] ⚠️ PASSED WITH WARNINGS - 상기 이슈 검토 필요
- [ ] ❌ FAILED - 치명적 이슈로 인해 재작업 필요

**테스터 서명:** ________________________  
**테스트 날짜:** ______________  

---

## 다음 단계

### PASSED인 경우:
1. ✅ 테스트 케이스 완료 표시
2. ✅ 이 보고서를 TICKET-029에 첨부
3. ✅ TICKET-030 (배포) 발행
4. ✅ 프로덕션 배포 진행

### FAILED인 경우:
1. ❌ 모든 이슈를 상세히 기록
2. ❌ 개발 팀에 할당
3. ❌ 각 이슈별 subtask 생성
4. ❌ 수정 후 재테스트

